(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1057:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var a=s(5155),n=s(2115),r=s(5695);function l(){let e=(0,r.useRouter)(),[t,s]=(0,n.useState)(""),[l,o]=(0,n.useState)(""),[u,c]=(0,n.useState)(""),i=async s=>{s.preventDefault(),c("");try{let s=await fetch("/student/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:t,password:l})});if(s.ok){let t=await s.json();try{"undefined"!=typeof Storage&&localStorage&&localStorage.setItem("username",t.username)}catch(e){console.warn("Local storage not available:",e)}"admin"===t.role?e.push("/admin"):"student"===t.role?e.push("/student"):c("Unknown role.")}else{let e=await s.json();c(e.error||"Login failed.")}}catch(e){console.error("Login error:",e),c("Something went wrong.")}};return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-slate-900 text-white",children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-6",children:[(0,a.jsx)("img",{src:"/dnd.png",alt:"Dungeons and Developers Logo",className:"w-[300px] h-[300px] object-contain"}),(0,a.jsxs)("form",{onSubmit:i,className:"bg-slate-800 p-6 rounded shadow max-w-sm w-full",noValidate:!0,action:"javascript:void(0)",children:[(0,a.jsx)("h2",{className:"text-2xl mb-4 text-center",children:"Student Login Portal"}),u&&(0,a.jsx)("p",{className:"mb-4 text-red-400 text-center",children:u}),(0,a.jsxs)("label",{className:"block mb-2",children:["Username",(0,a.jsx)("input",{type:"text",className:"w-full p-2 mt-1 rounded text-black",value:t,onChange:e=>s(e.target.value),required:!0,autoComplete:"username"})]}),(0,a.jsxs)("label",{className:"block mb-4",children:["Password",(0,a.jsx)("input",{type:"password",className:"w-full p-2 mt-1 rounded text-black",value:l,onChange:e=>o(e.target.value),required:!0,autoComplete:"current-password"})]}),(0,a.jsx)("button",{type:"submit",className:"w-full py-2 bg-purple-600 hover:bg-purple-700 rounded transition",disabled:!t||!l,children:"Login"})]})]})})}},2044:(e,t,s)=>{Promise.resolve().then(s.bind(s,1057))},5695:(e,t,s)=>{"use strict";var a=s(8999);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(2044)),_N_E=e.O()}]);