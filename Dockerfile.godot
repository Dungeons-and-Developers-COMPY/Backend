# Dockerfile.godot

FROM ubuntu:22.04

# Install Wine and required libraries
RUN dpkg --add-architecture i386 && \
    apt update && \
    apt install -y software-properties-common && \
    add-apt-repository ppa:cybermax-dexter/sdl2-backport && \
    apt update && \
    apt install -y \
    wine64 wine32 \
    libasound2 libpulse0 libx11-6 libxcursor1 libxrandr2 libxi6 libgl1-mesa-glx libglu1-mesa \
    && rm -rf /var/lib/apt/lists/*

WORKDIR /app

# Copy Windows build
COPY windows_server/server.exe /app/server.exe
COPY windows_server/server.pck /app/server.pck

EXPOSE 12341
EXPOSE 12342
EXPOSE 12343
EXPOSE 12344
EXPOSE 12345
EXPOSE 12346
EXPOSE 12347
EXPOSE 12348
EXPOSE 12349

ENTRYPOINT ["wine", "server.exe", "--server"]
